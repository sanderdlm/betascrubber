{% extends 'base.twig' %}

{% block content %}
    {% if error %}
        <div style="padding: 1rem; background: #000; color: #fff; border-bottom: 1px solid #e0e0e0;">
            {{ error }}
        </div>
    {% endif %}

    <div style="padding: 1rem;">
        <form action="/" method="post">
            <input
                type="url"
                id="video_url"
                name="video_url"
                placeholder="Paste YouTube URL"
                required
                autofocus
                style="margin-bottom: 0.5rem;"
            />
            <button type="submit" style="width: 100%;">
                Process
            </button>
        </form>
    </div>

    {% if recent_boulders|length > 0 %}
        <div style="border-top: 1px solid #e0e0e0;">
            {% for boulder in recent_boulders %}
                <a href="/view-final/{{ boulder.hash }}" style="display: block; border-bottom: 1px solid #e0e0e0; text-decoration: none; color: inherit; transition: background 0.2s;">
                    <div style="padding: 1rem; display: flex; gap: 1rem; align-items: center;">
                        <div style="flex-shrink: 0; width: 80px; height: 80px; background: #000;">
                            <img src="/tmp/{{ boulder.folder }}_final/{{ boulder.thumbnail }}" alt="{{ boulder.title }}" style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                        <div style="flex: 1; min-width: 0;">
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">{{ boulder.title }}</div>
                            <div style="font-size: 0.85rem; color: #999;">{{ boulder.hash }}</div>
                        </div>
                    </div>
                </a>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}